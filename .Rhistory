titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~Taxa de câmbio nominal, yaxis="y2",
data=df2, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
#   tickfont = list(color = "black"),
#   overlaying = "y",
#   side = "right",
#   title = "second y axis"
# )
# p <- ggplotly(IBC_plot) %>%
#   add_trace(x = ~date, y = ~value mode = "lines", yaxis = "y2", name = "Visits") %>%
#   layout(legend = list(orientation = "h", x = 0, y =-0.1),
#          yaxis2 = list(overlaying = "y", side = "right"))
# p
df2 <- tibble(date, cambio,
.name_repair = ~ c('date','cambio'))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~cambio, yaxis="y2",
data=df2, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
#   tickfont = list(color = "black"),
#   overlaying = "y",
#   side = "right",
#   title = "second y axis"
# )
# p <- ggplotly(IBC_plot) %>%
#   add_trace(x = ~date, y = ~value mode = "lines", yaxis = "y2", name = "Visits") %>%
#   layout(legend = list(orientation = "h", x = 0, y =-0.1),
#          yaxis2 = list(overlaying = "y", side = "right"))
# p
df2 <- tibble(date, cambio,
.name_repair = ~ c('date','cambio'))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~cambio, yaxis="y2",
data=df2, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~Selic, yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
df
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~value, yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
df2
df2$cambio
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~value, yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
rlang::last_error()
rlang::last_trace()
#   tickfont = list(color = "black"),
#   overlaying = "y",
#   side = "right",
#   title = "second y axis"
# )
# p <- ggplotly(IBC_plot) %>%
#   add_trace(x = ~date, y = ~value mode = "lines", yaxis = "y2", name = "Visits") %>%
#   layout(legend = list(orientation = "h", x = 0, y =-0.1),
#          yaxis2 = list(overlaying = "y", side = "right"))
# p
df2 <- tibble(date, cambio,
.name_repair = ~ c('date','cambio'))
df2$cambio
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~date, y= ~value, yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
#    nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df2, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
nticks = 5,
side = "right"
))
ggplot(within(df2, Var1 <- as.Date(Var1)), aes(x=Var1)) +
geom_bar( aes(y=Freq), stat="identity", size=.1,
fill="steelblue", color="black", alpha=.4) +
geom_line( aes(y=rollmean), size=2, color="red") +
scale_y_continuous(name = "Temperature (Celsius °)",
sec.axis = sec_axis( ~.,name="Price ($)")) +
theme(axis.title.y = element_text(color = "steelblue", size=13),
axis.title.y.right = element_text(color = "red", size=13)) +
ggtitle("Temperature down, price up")
g <- ggplot(within(df2, Var1 <- as.Date(Var1)), aes(x=Var1)) +
geom_bar( aes(y=Freq), stat="identity", size=.1,
fill="steelblue", color="black", alpha=.4) +
geom_line( aes(y=rollmean), size=2, color="red") +
scale_y_continuous(name = "Temperature (Celsius °)") +
theme(axis.title.y = element_text(color = "steelblue", size=13),
axis.title.y.right = element_text(color = "red", size=13)) +
ggtitle("Temperature down, price up")
df2
source('~/Doutorado/PED - CE342/Aulas/Macro/Empirico/secaxus.R', echo=TRUE)
df2
Juros_cambio_plot <- ggplot(df)  +
#geom_ribbon(data = df_metas, aes(x=date, ymin=Piso, ymax =Teto), fill = "GREY80") +
geom_rect(data = rects_mensal, aes(xmin = xstart, xmax = xend, ymin = min(df$value)-1, ymax = max(df$value)+1, fill = col), alpha = 0.4) +
geom_line(aes(x=date, y=value, color=variable, linetype = variable),stat="identity", size = 1) +
scale_y_continuous(labels = function(x) paste0(x, ""),breaks = scales::pretty_breaks(n = 6), expand = c(0,0),
sec.axis = sec_axis(~(./max(df[which(df['variable'] == 'Selic'),'value'])*5)), name="") +
scale_x_date(date_breaks = '1 year', date_minor_breaks = '6 months', date_labels = "%y",expand = c(0, 0.02)) +
labs(title = 'Taxa Selic, FED Rates + EMBI-Br e Taxa de câmbio nominal') +
scale_fill_brewer(palette="Blues", name = 'Períodos') +
scale_color_brewer(palette="Set1", name = 'Períodos') +
guides(linetype = "none", fill = 'none') +
ylab('') +
xlab('') +
theme_classic() +
theme(  panel.grid = element_blank(),
panel.border = element_blank(),
legend.position="bottom",
legend.title = element_blank(),
legend.text = element_text(size=10),
legend.key = element_rect(colour = "black"),
legend.box.background = element_rect(colour = "black", size = 1),
axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.6,size=10, colour = 'black'),
axis.text.y = element_text(size=10))
Juros_cambio_plot
Juros_cambio_plot <- ggplot(df)  +
#geom_ribbon(data = df_metas, aes(x=date, ymin=Piso, ymax =Teto), fill = "GREY80") +
geom_rect(data = rects_mensal, aes(xmin = xstart, xmax = xend, ymin = min(df$value)-1, ymax = max(df$value)+1, fill = col),stat="identity", alpha = 0.4) +
geom_line(aes(x=date, y=value, color=variable, linetype = variable),stat="identity", size = 1) +
scale_y_continuous(labels = function(x) paste0(x, ""),breaks = scales::pretty_breaks(n = 6), expand = c(0,0),
sec.axis = sec_axis(~(./max(df[which(df['variable'] == 'Selic'),'value'])*5)), name="") +
scale_x_date(date_breaks = '1 year', date_minor_breaks = '6 months', date_labels = "%y",expand = c(0, 0.02)) +
labs(title = 'Taxa Selic, FED Rates + EMBI-Br e Taxa de câmbio nominal') +
scale_fill_brewer(palette="Blues", name = 'Períodos') +
scale_color_brewer(palette="Set1", name = 'Períodos') +
guides(linetype = "none", fill = 'none') +
ylab('') +
xlab('') +
theme_classic() +
theme(  panel.grid = element_blank(),
panel.border = element_blank(),
legend.position="bottom",
legend.title = element_blank(),
legend.text = element_text(size=10),
legend.key = element_rect(colour = "black"),
legend.box.background = element_rect(colour = "black", size = 1),
axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.6,size=10, colour = 'black'),
axis.text.y = element_text(size=10))
Juros_cambio_plot
df
df <- tibble(date, selic, embi_2,fed_embi, cambio,
.name_repair = ~ c('date','Selic','EMBI-Br','FED Rates + EMBI-Br','Taxa de câmbio nominal'))
date <- seq(as.Date("1999-08-1"), as.Date("2021-10-1"), by = "month")
embi_2 <- embi/100
embi_2
embi
fed_embi <- embi_2 + fed_rate
plot(fed_embi)
plot(embi_2)
fed_rate
df <- tibble(date, selic, embi_2,fed_embi, cambio,
.name_repair = ~ c('date','Selic','EMBI-Br','FED Rates + EMBI-Br','Taxa de câmbio nominal'))
df <- df %>%
fill(Selic)
df$`Taxa de câmbio nominal` <- df$`Taxa de câmbio nominal` *5
df
rects_mensal <- data.frame(xstart = c(as.Date("1999-08-1"),as.Date("2004-12-1"),as.Date("2011-12-1"),as.Date("2015-12-1"),as.Date("2017-12-1"),as.Date("2019-12-1")),
xend = c(as.Date("2004-12-1"),as.Date("2011-12-1"),as.Date("2015-12-1"),as.Date("2017-12-1"),as.Date("2019-12-1"),as.Date( "2021-10-1")),
col = c('I (99-03)','II (04-10)','III (11-14)','IV (15-16)','V (17-19)','VI (20-21)'))
df %>%
mutate(across(!date,as.numeric))
df <- reshape2::melt(df, id.vars= 'date')
df
Juros_cambio_plot <- ggplot(df)  +
#geom_ribbon(data = df_metas, aes(x=date, ymin=Piso, ymax =Teto), fill = "GREY80") +
geom_rect(data = rects_mensal, aes(xmin = xstart, xmax = xend, ymin = min(df$value)-1, ymax = max(df$value)+1, fill = col), alpha = 0.4) +
geom_line(aes(x=date, y=value, color=variable, linetype = variable),stat="identity", size = 1) +
scale_y_continuous(labels = function(x) paste0(x, ""),breaks = scales::pretty_breaks(n = 6), expand = c(0,0),
sec.axis = sec_axis(~(./max(df[which(df['variable'] == 'Selic'),'value'])*5)), name="") +
scale_x_date(date_breaks = '1 year', date_minor_breaks = '6 months', date_labels = "%y",expand = c(0, 0.02)) +
labs(title = 'Taxa Selic, FED Rates + EMBI-Br e Taxa de câmbio nominal') +
scale_fill_brewer(palette="Blues", name = 'Períodos') +
scale_color_brewer(palette="Set1", name = 'Períodos') +
guides(linetype = "none", fill = 'none') +
ylab('') +
xlab('') +
theme_classic() +
theme(  panel.grid = element_blank(),
panel.border = element_blank(),
legend.position="bottom",
legend.title = element_blank(),
legend.text = element_text(size=10),
legend.key = element_rect(colour = "black"),
legend.box.background = element_rect(colour = "black", size = 1),
axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.6,size=10, colour = 'black'),
axis.text.y = element_text(size=10))
Juros_cambio_plot
#   tickfont = list(color = "black"),
#   overlaying = "y",
#   side = "right",
#   title = "second y axis"
# )
# p <- ggplotly(IBC_plot) %>%
#   add_trace(x = ~date, y = ~value mode = "lines", yaxis = "y2", name = "Visits") %>%
#   layout(legend = list(orientation = "h", x = 0, y =-0.1),
#          yaxis2 = list(overlaying = "y", side = "right"))
# p
df2 <- tibble(date, cambio,
.name_repair = ~ c('date','cambio'))
df2$cambio
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df2, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
nticks = 5,
side = "right"
))
ggplotly(Juros_cambio_plot) %>%
add_lines(x= ~1:length(cambio), y= ~1:length(cambio), yaxis="y2",
data=df, showlegend=FALSE, inherit=TRUE)  %>%
layout(yaxis2 = list(
tickfont = list(size=11.7),
titlefont=list(size=14.6, col = "red"),
overlaying = "y",
nticks = 5,
side = "right",
title = ''
))
length(cambio
length(cambio)
burger<- tibble(
Day = rep(1:4,2),
Dose = c(0.5,0.6,0.4,0.3,0.5,0.6,0.4,0.3),
Wight = c(0.95,0.92,0.93,0.98,0.95,0.92,0.93,0.98))
plot_ly(data = burger) %>%
add_lines(x = ~Day, y = ~Dose,  name = "Dose") %>%
add_bars(x = ~Day, y = ~Wight, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
ggplot(data = burger, aes(x = Day, y = Dose))+
geom_bar(aes(y = Wight * (0.98/0.6) - 1), stat = "identity") +
geom_line(size = 2) +
geom_point(aes(colour = Day))  +
scale_y_continuous(name = "Dose",
sec.axis = sec_axis(trans =  ~(.+1)*(0.6/0.98),
name = "Wight")) +
coord_cartesian(ylim = c(0.3, 0.6))
plot_ly(data = burger) %>%
add_lines(x = ~Day, y = ~Dose,  name = "Dose") %>%
add_bars(x = ~Day, y = ~Wight, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
df
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose",yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose",yaxis = "y2") %>%
add_bars(x = ~Day, y = ~Wight, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose",yaxis = "y2") %>%
add_bars(x = ~date y = ~value, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date y = ~value, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date y = ~value, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date, y = ~value, yaxis = "y2", name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
df2
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date, y = ~cambio, yaxis = "y2", data = df2, name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(0.9, 1)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date, y = ~cambio, yaxis = "y2", data = df2, name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0.2, 0.6)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_bars(x = ~date, y = ~cambio, yaxis = "y2", data = df2, name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable,  name = "Dose") %>%
add_lines(x = ~date, y = ~cambio, yaxis = "y2", data = df2, name = "Wight") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(x = ~date, y = ~cambio, yaxis = "y2", data = df2) %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(x = ~date, y = ~cambio, data = df2,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(data = df2,x = ~date, y = ~cambio,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
#showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(data = df2,x = ~date, y = ~cambio,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(data = df2,x = ~date, y = 1:6,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(data = df2,x = ~date, y = ~cambio,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 25)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
plot_ly(data = df) %>%
add_lines(x = ~date, y = ~value, colors = ~variable) %>%
add_lines(data = df2,x = ~date, y = ~cambio,yaxis = "y2") %>%
layout(
yaxis = list(showline = TRUE, side = "left",
title = "Dose", range = c(0, 30)),
yaxis2 = list(showline = TRUE, side = "right",
overlaying = "y",  title = "Wight", range = c(1, 6)),
showlegend = FALSE,
margin = list(pad = 0, b = 50, l = 50, r = 50))
